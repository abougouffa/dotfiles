#!/bin/zsh

# This is an automatically generated file, it should be sourced from `~/.zshrc',
# it defines some useful aliases, and customize some environment variables for
# better defaults.
# Abdelhak BOUGOUFFA (c) 2022

# Alias to run emacs in terminal mode
alias et="e -t"
# Aliases to run emacs+magit
alias magit='e --eval "(progn (magit-status) (delete-other-windows))"'
alias magitt="magit -t"
# Aliases to run emacs+mu4e
alias emu='e --eval "(progn (=mu4e) (delete-other-windows))"'
alias emut="e -t"

# Define aliases to 'pbcopy' and 'pbpaste'
if command -v xclip &> /dev/null
then
  # Define aliases using xclip
  alias pbcopy='xclip -selection clipboard'
  alias pbpaste='xclip -selection clipboard -o'
elif command -v xsel &> /dev/null
then
  # Define aliases using xsel
  alias pbcopy='xsel --clipboard --input'
  alias pbpaste='xsel --clipboard --output'
fi

# To run GUI apps from terminal with root permissions
if command -v xhost &> /dev/null
then
  alias gsuon='xhost si:localuser:root'
  alias gsuoff='xhost -si:localuser:root'
fi

# To copy the output of a command to ptpb.pw
alias netpaste='curl -F c=@- https://ptpb.pw'

# NeoVim
if command -v nvim &> /dev/null
then
  alias vim="nvim"
  alias vi="nvim"
fi

# ESP-IDF
if [ -d $HOME/sources-and-libs/esp-idf/ ]
then
  # If not, clone "https://github.com/espressif/esp-idf.git"
  alias esp_env='. $HOME/sources-and-libs/esp-idf/export.sh'
  alias esp_update='cd $HOME/sources-and-libs/esp-idf ; git pull --all'
fi

# Dotfiles
alias dotfiles='git --git-dir=$HOME/Projects/dotfiles/.git --work-tree=$HOME'

# Enable Meta key + colors in minicom
export MINICOM='-m -c on'

# RUST
export RUST_SRC_PATH=$HOME/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/src/
export PATH=$PATH:$HOME/.cargo/bin

# Multiple versions of Clang-format are installed here,
# from the AUR package "clang-format-static-bin", I used it with some work projects
# requiring a specific version of Clang-format
export PATH=/opt/clang-format-static:$PATH

# Add my manually installed libraries to CMake
export CMAKE_PREFIX_PATH=$HOME/sources-and-libs/build_installs
export PATH=$PATH:$HOME/.cargo/bin:$HOME/sources-and-libs/build_installs/bin

# Set NPM installation path to local
NPM_PACKAGES="${HOME}/.npm-packages"

# Export NPM bin path
export PATH="$PATH:$NPM_PACKAGES/bin"

# Preserve MANPATH if you already defined it somewhere in your config.
# Otherwise, fall back to `manpath` so we can inherit from `/etc/manpath`.
export MANPATH="${MANPATH-$(manpath)}:$NPM_PACKAGES/share/man"

# FZF
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# Start or attach to the default tmux session
if command -v tmux &> /dev/null && [ -z "$TMUX" ]
then
    tmux attach -t default || tmux new -s default
fi

# opam configuration
[[ ! -r $HOME/.opam/opam-init/init.zsh ]] || source $HOME/.opam/opam-init/init.zsh  > /dev/null 2> /dev/null

# Add ~/.emacs-doom.d/bin to path (for DOOM Emacs stuff)
export PATH=$PATH:$HOME/.emacs-doom/bin
